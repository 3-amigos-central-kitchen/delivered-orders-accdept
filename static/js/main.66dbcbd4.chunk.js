(this["webpackJsonp3-amigos-admin"]=this["webpackJsonp3-amigos-admin"]||[]).push([[0],{84:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),a=n(21),i=n.n(a),s=n(33),o=n(7),l=n(13),j=n.n(l),d=n(19),u=n(26),b=n(29),h=n.n(b),x=n(107),O="https://firestore-apis.herokuapp.com",p=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(O,"/getAllDeliveredOrderIds"),e.prev=1,e.next=4,h.a.get(t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(O,"/getOrderDetailsFromId"),c={"Access-Control-Allow-Origin":"*"},e.prev=2,e.next=5,h.a.post(n,{orderid:t},{header:c});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),m=n(5),f=n(101),v=n(102),y=n(103),w=n(85),k=n(104),C=n(105),N=n(106),T=n(99),S=Object(T.a)((function(){return{octRoot:{minWidth:275,backgroundColor:"#fefefefe"},chargeTitle:{paddingRight:9,color:"#757575"},chargePrice:{paddingRight:2},dataTable:{minWidth:650},oidRoot:{textDecoration:"none",margin:"10px 50px"},oidPos:{margin:"10px 10px"}}})),E=Object(m.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(f.a),I=Object(m.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(v.a),R=function(e){var t=S(),n=[];return function(e){Object.keys(e.orders).map((function(t){var c=e.orders[t];n.push(c)}))}(e),Object(c.jsx)(y.a,{component:w.a,children:Object(c.jsxs)(k.a,{className:t.dataTable,size:"small","aria-label":"Order Details",children:[Object(c.jsx)(C.a,{children:Object(c.jsxs)(v.a,{children:[Object(c.jsx)(E,{align:"center",children:"Item"}),Object(c.jsx)(E,{align:"center",children:"Unit"}),Object(c.jsx)(E,{align:"center",children:"Weight/unit"}),Object(c.jsx)(E,{align:"center",children:"Price/unit"}),Object(c.jsx)(E,{align:"center",children:"Qty"}),Object(c.jsx)(E,{align:"center",children:"Expected Weight"}),Object(c.jsx)(E,{align:"center",children:"Final Price"}),Object(c.jsx)(E,{align:"center",children:"Taxable"})]})}),Object(c.jsx)(N.a,{children:n.map((function(e){return Object(c.jsxs)(I,{children:[Object(c.jsx)(E,{align:"center",component:"th",scope:"row",children:e.item}),Object(c.jsx)(E,{align:"center",children:e.package}),Object(c.jsx)(E,{align:"center",children:e.weight}),Object(c.jsx)(E,{align:"center",children:e.price}),Object(c.jsx)(E,{align:"center",children:e.qty}),Object(c.jsx)(E,{align:"center",children:e.expectedQty}),Object(c.jsx)(E,{align:"center",children:e.calculatedPrice}),Object(c.jsx)(E,{align:"center",children:e.taxable})]},e.calculatedPrice)}))})]})})},D=n(108),P=n(109),B=n(110),J=n(111),U=function(e){var t=e.chargesData,n=S();return Object(c.jsx)(x.a,{container:!0,direction:"column",justify:"center",alignContent:"center",children:Object(c.jsx)(D.a,{className:n.octRoot,variant:"outlined",raised:!0,children:Object(c.jsxs)(P.a,{children:[Object(c.jsx)(x.a,{item:!0,children:Object(c.jsx)(B.a,{variant:"h5",gutterBottom:!0,children:"Total Charges"})}),["Delivery","Taxable","Non Taxable","QST","GST","Sub Total","Total"].map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(J.a,{}),Object(c.jsxs)(x.a,{container:!0,direction:"row",children:[Object(c.jsx)(x.a,{item:!0,children:Object(c.jsxs)(B.a,{className:n.chargeTitle,gutterBottom:!0,children:[e,":"]})}),Object(c.jsx)(x.a,{item:!0,children:Object(c.jsx)(B.a,{className:n.chargePrice,gutterBottom:!0,children:t[e.replace(" ","").toUpperCase()]})})]})]})}))]})})})},W=function(e){var t=e.match,n=Object(r.useState)({}),a=Object(u.a)(n,2),i=a[0],s=a[1],o=Object(r.useState)({}),l=Object(u.a)(o,2),b=l[0],h=l[1],O=function(){var e=Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t.params.id);case 2:n=e.sent,h({}),s({}),s(n.chargesData),h(n.order);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){O()}),[]),Object(c.jsxs)(x.a,{container:!0,spacing:2,justify:"space-around",children:[Object(c.jsxs)(x.a,{item:!0,lg:9,md:9,sm:12,xs:12,children:[" ",Object(c.jsx)(R,{orders:b})," "]}),Object(c.jsxs)(x.a,{item:!0,lg:3,md:3,sm:12,xs:12,children:[" ",Object(c.jsx)(U,{chargesData:i})," "]})]})},z=n(112),A=function(e){var t=e.orderid,n=S(),r=t.slice(-8);return Object(c.jsx)(D.a,{className:n.oidRoot,component:s.b,to:"".concat("/delivered-orders-accdept","/").concat(t),children:Object(c.jsx)(z.a,{children:Object(c.jsx)(P.a,{children:Object(c.jsxs)(x.a,{container:!0,spacing:2,justify:"space-evenly",children:[Object(c.jsx)(x.a,{item:!0,children:Object(c.jsx)(B.a,{className:n.oidPos,variant:"h5",component:"h2",children:t})}),Object(c.jsx)(x.a,{item:!0,children:Object(c.jsxs)(B.a,{className:n.oidPos,color:"textSecondary",children:["Date: ","".concat(r.substring(0,2)," / ").concat(r.substring(2,4)),Object(c.jsx)("br",{}),"Time: ","".concat(r.substring(4,6)," : ").concat(r.substring(6,8))]})})]})})})})},Q=n(113),F=n(20),q=Object(T.a)((function(){var e;return{ordersRoot:{backgroundColor:"#EEEEEE",maxHeight:"100%"},stickyCard:(e={position:"-webkit-sticky"},Object(F.a)(e,"position","sticky"),Object(F.a)(e,"top",20),Object(F.a)(e,"bottom",20),Object(F.a)(e,"paddingTop","40px"),Object(F.a)(e,"paddingBottom","40px"),Object(F.a)(e,"zIndex",5),e),alignCenter:{alignContent:"center",alignItems:"center",justifyContent:"center",justifyItems:"center"},button:{marginBottom:20}}})),G=localStorage||window.localStorage,H=function(){var e=q(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],i=n[1],s=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:t=e.sent,i(t),t=JSON.stringify(t),G.clear(),G.setItem("orderids",t),console.log("fetch oids");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=Object(c.jsx)(x.a,{sm:3,md:3,lg:3,children:Object(c.jsx)(D.a,{className:e.stickyCard,children:Object(c.jsx)(P.a,{children:Object(c.jsxs)(x.a,{container:!0,justify:"center",children:[Object(c.jsx)(Q.a,{color:"primary",variant:"contained",className:e.button,onClick:function(){return s()},children:"Update"}),Object(c.jsx)(B.a,{paragraph:!0,children:"Use this button after you turn on the computer, when job starts OR when you know there's a new order available."})]})})})}),l=a.map((function(t){return Object(c.jsx)(x.a,{container:!0,direction:"row",justify:"center",alignItems:"center",className:e.ordersRoot,children:Object(c.jsx)(A,{orderid:t})})}));return Object(r.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=G.getItem("orderids"))){e.next=7;break}t=JSON.parse(t),i(t),console.log("cache"),e.next=9;break;case 7:return e.next=9,s();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{children:a.length>0?Object(c.jsxs)(x.a,{container:!0,spacing:3,justify:"space-evenly",className:e.ordersRoot,children:[o,Object(c.jsx)(x.a,{children:l})]}):Object(c.jsx)("h1",{children:"Loading"})})},L=function(){var e="/delivered-orders-accdept";return Object(c.jsx)(s.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{path:e+"/:id",exact:!0,component:W}),Object(c.jsx)(o.a,{path:e+"/",exact:!0,component:H})]})})};i.a.render(Object(c.jsx)(L,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.66dbcbd4.chunk.js.map